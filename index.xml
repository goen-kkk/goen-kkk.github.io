<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>My New Hugo Site</title>
    <link>https://goen-kkk.github.io/</link>
    <description>Recent content on My New Hugo Site</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 15 Jun 2023 14:38:01 +0800</lastBuildDate><atom:link href="https://goen-kkk.github.io/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>HUGO博客搭建｜PaperModeX主题</title>
      <link>https://goen-kkk.github.io/posts/post/</link>
      <pubDate>Sun, 07 May 2023 09:19:22 +0800</pubDate>
      
      <guid>https://goen-kkk.github.io/posts/post/</guid>
      <description>建站笔记</description>
      <content:encoded><![CDATA[<h2 id="1-安装hugo-mac">1 安装Hugo [Mac]</h2>
<p><a href="https://www.gohugo.org/doc/tutorials/installing-on-mac/">官网教程</a></p>
<ol>
<li>安装<code>brew</code></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ruby -e <span class="s2">&#34;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install<span class="k">)</span><span class="s2">&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>运行<code>brew</code>安装<code>hugo</code></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">brew install hugo
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="2-生成站点">2 生成站点</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">hugo new site /path/to/site -f yml <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="o">&amp;&amp;</span> <span class="nb">cd</span> /path/to/site
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="3-安装主题">3 安装主题</h2>
<p>在你的站点文件夹运行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git clone https://github.com/reorx/hugo-PaperModX themes/PaperModX --depth<span class="o">=</span><span class="m">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Sample <code>config.yml</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">baseURL</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://examplesite.com/&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">languageCode</span><span class="p">:</span><span class="w"> </span><span class="l">en-us</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">My New Hugo Site</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">theme</span><span class="p">:</span><span class="w"> </span><span class="l">PaperModX</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">enableRobotsTXT</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">buildDrafts</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">buildFuture</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">buildExpired</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">pygmentsUseClasses</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">googleAnalytics</span><span class="p">:</span><span class="w"> </span><span class="l">UA-123-45</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">enableEmoji</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">minify</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">disableXML</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">minifyOutput</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">params</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">env</span><span class="p">:</span><span class="w"> </span><span class="l">production</span><span class="w"> </span><span class="c"># to enable google analytics, opengraph, twitter-cards and schema.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">ExampleSite</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;ExampleSite description&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">keywords</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">Blog, Portfolio, PaperModX]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">author</span><span class="p">:</span><span class="w"> </span><span class="l">Me</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># author: [&#34;Me&#34;, &#34;You&#34;] # multiple authors</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">images</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;&lt;link or path of image for opengraph, twitter-cards&gt;&#34;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">DateFormat</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;January 2, 2006&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">defaultTheme</span><span class="p">:</span><span class="w"> </span><span class="l">auto</span><span class="w"> </span><span class="c"># dark, light</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">disableThemeToggle</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ShowReadingTime</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ShowShareButtons</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ShowPostNavLinks</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ShowBreadCrumbs</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ShowCodeCopyButtons</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># 显示代码复制按钮</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">disableSpecial1stPost</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">disableScrollToTop</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">comments</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">hidemeta</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">hideSummary</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">showtoc</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">tocopen</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">math</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># MathJex设置</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">homeInfoParams</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">Title</span><span class="p">:</span><span class="w"> </span><span class="l">Hi there wave</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">Content</span><span class="p">:</span><span class="w"> </span><span class="l">Can be Info, links, about..</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">socialIcons</span><span class="p">:</span><span class="w"> </span><span class="c"># optional</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;platform&gt;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;link&gt;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;platform 2&gt;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;link2&gt;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">assets</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># disableFingerprinting: true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">favicon</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;link / abs url&gt;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">favicon16x16</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;link / abs url&gt;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">favicon32x32</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;link / abs url&gt;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">apple_touch_icon</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;link / abs url&gt;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">safari_pinned_tab</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;link / abs url&gt;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">label</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">text</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Home&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">icon</span><span class="p">:</span><span class="w"> </span><span class="l">/apple-touch-icon.png</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">iconHeight</span><span class="p">:</span><span class="w"> </span><span class="m">35</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># profile-mode</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">profileMode</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c"># needs to be explicitly set</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">ExampleSite</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">subtitle</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;This is subtitle&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">imageUrl</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;img location&gt;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">imageWidth</span><span class="p">:</span><span class="w"> </span><span class="m">120</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">imageHeight</span><span class="p">:</span><span class="w"> </span><span class="m">120</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">imageTitle</span><span class="p">:</span><span class="w"> </span><span class="l">my image</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">buttons</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Posts</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">posts</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Tags</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">tags</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># home-info mode</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">homeInfoParams</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">Title</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Hi there \U0001F44B&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">Content</span><span class="p">:</span><span class="w"> </span><span class="l">Welcome to my blog</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">socialIcons</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">twitter</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://twitter.com/&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">stackoverflow</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://stackoverflow.com&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">github</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://github.com/&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">analytics</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">google</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">SiteVerificationTag</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;XYZabc&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">bing</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">SiteVerificationTag</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;XYZabc&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">yandex</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">SiteVerificationTag</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;XYZabc&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">cover</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">hidden</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># hide everywhere but not in structured data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">hiddenInList</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># hide on list pages and home</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">hiddenInSingle</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># hide on single page</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># responsiveImages: false # To reduce generation time and size of the site, you can disable this feature</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># linkFullImages: true # To enable hyperlinks to the full image size on post pages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">editPost</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">URL</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://github.com/&lt;path_to_repo&gt;/content&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">Text</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Suggest Changes&#34;</span><span class="w"> </span><span class="c"># edit text</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">appendFilePath</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># to append file path to Edit link</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># for search</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># https://fusejs.io/api/options.html</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">fuseOpts</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">isCaseSensitive</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">shouldSort</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">location</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">distance</span><span class="p">:</span><span class="w"> </span><span class="m">1000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="m">0.4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">minMatchCharLength</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">keys</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;title&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;permalink&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;summary&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;content&#34;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">menu</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">main</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">identifier</span><span class="p">:</span><span class="w"> </span><span class="l">Archives</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Archives</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">/archives/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">10</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># - identifier: categories</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c">#   name: categories</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c">#   url: /categories/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c">#   weight: 10</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">identifier</span><span class="p">:</span><span class="w"> </span><span class="l">Tags</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Tags</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">/tags/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">20</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># - identifier: example</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c">#   name: example.org</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c">#   url: https://example.org</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c">#   weight: 30</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">identifier</span><span class="p">:</span><span class="w"> </span><span class="l">Search</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Search</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">/search</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">30</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">outputs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">home</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">HTML</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">RSS</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">JSON</span><span class="w"> </span><span class="c"># is necessary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Read: https://github.com/reorx/hugo-PaperModX/wiki/FAQs#using-hugos-syntax-highlighter-chroma</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">pygmentsUseClasses</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">markup</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">highlight</span><span class="p">:</span><span class="w">      </span><span class="c"># 代码高亮</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># anchorLineNos: true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">codeFences</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">guessSyntax</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">lineNos</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">style</span><span class="p">:</span><span class="w"> </span><span class="l">monokai</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">goldmark</span><span class="p">:</span><span class="w">       
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">renderer</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">unsafe</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">    </span><span class="c"># 关闭安全模式</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="新建文章">新建文章</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">hugo new posts/yourarticlename.md
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="本地调试">本地调试</h3>
<p>执行命令后，在浏览器打开<code>http://localhost:1313</code>可预览网站</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">hugo server -D
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>-D</code>可看到草稿文章</p>
<h3 id="部署github">部署Github</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">hugo    <span class="c1">##生成静态页面文件</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>在命令执行后，出现一个public文件夹，里面就是网站的静态页面文件
进入public文件夹，使用git上传文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> public
</span></span><span class="line"><span class="cl">git init    <span class="c1">##初始化仓库</span>
</span></span><span class="line"><span class="cl">git remote add origin https://github.com/caecarxu/caecarxu.github.io.git    <span class="c1">##链接远程仓库</span>
</span></span><span class="line"><span class="cl">git add .
</span></span><span class="line"><span class="cl">git commit -m <span class="s2">&#34;first commit&#34;</span>
</span></span><span class="line"><span class="cl">git push -u origin master
</span></span></code></pre></td></tr></table>
</div>
</div><p>在此之后更新文章，使用hugo生成新的静态页面，并使用git push进行同步</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> public
</span></span><span class="line"><span class="cl">git add .
</span></span><span class="line"><span class="cl">git status
</span></span><span class="line"><span class="cl">git commit -m <span class="s2">&#34;add blog post&#34;</span>
</span></span><span class="line"><span class="cl">git push
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="5-主题设置">5 主题设置</h2>
<h3 id="mathjex">MathJex</h3>
<p>创建<code>partials/math.html</code>文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="c">&lt;!-- Mathjex --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">MathJax</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">tex</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">inlineMath</span><span class="o">:</span> <span class="p">[[</span><span class="s1">&#39;$&#39;</span><span class="p">,</span> <span class="s1">&#39;$&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;\\(&#39;</span><span class="p">,</span> <span class="s1">&#39;\\)&#39;</span><span class="p">]],</span>
</span></span><span class="line"><span class="cl">        <span class="nx">displayMath</span><span class="o">:</span> <span class="p">[[</span><span class="s1">&#39;$$&#39;</span><span class="p">,</span><span class="s1">&#39;$$&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;\\[&#39;</span><span class="p">,</span> <span class="s1">&#39;\\]&#39;</span><span class="p">]],</span>
</span></span><span class="line"><span class="cl">        <span class="nx">processEscapes</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">processEnvironments</span><span class="o">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">skipHtmlTags</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;script&#39;</span><span class="p">,</span> <span class="s1">&#39;noscript&#39;</span><span class="p">,</span> <span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="s1">&#39;textarea&#39;</span><span class="p">,</span> <span class="s1">&#39;pre&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s2">&#34;mjx-container&#34;</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">          <span class="nx">x</span><span class="p">.</span><span class="nx">parentElement</span><span class="p">.</span><span class="nx">classList</span> <span class="o">+=</span> <span class="s1">&#39;has-jax&#39;</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">      <span class="p">});</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;https://polyfill.io/v3/polyfill.min.js?features=es6&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;MathJax-script&#34;</span> <span class="na">async</span>
</span></span><span class="line"><span class="cl">    <span class="na">src</span><span class="o">=</span><span class="s">&#34;https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>在<code>blank.css</code>中添加</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="nt">code</span><span class="p">.</span><span class="nc">has-jax</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kp">-webkit-</span><span class="n">font-smoothing</span><span class="p">:</span> <span class="n">antialiased</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">background</span><span class="p">:</span> <span class="kc">inherit</span> <span class="cp">!important</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border</span><span class="p">:</span> <span class="kc">none</span> <span class="cp">!important</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">font-size</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>全局开启公式渲染，在<code>partials/extend_head.html</code>中加入</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">{{ if or .Params.math .Site.Params.math }}
</span></span><span class="line"><span class="cl">{{ partial &#34;math.html&#34; . }}
</span></span><span class="line"><span class="cl">{{ end }}
</span></span></code></pre></td></tr></table>
</div>
</div><p>在<code>config.yml</code>中加入</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">params</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">math</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="图片caption居中">图片caption居中</h3>
<p>在<code>blank.css</code>中添加</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="nt">figcaption</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>进一步更改图片caption样式可以在<code>main.css</code>中更改<code>.post-warp</code> <code>.post-content</code> <code>.image-caption:not(:empty)</code> 元素的值，例如</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">.</span><span class="nc">post-warp</span> <span class="p">.</span><span class="nc">post-content</span> <span class="p">.</span><span class="nc">image-caption</span><span class="p">:</span><span class="nd">not</span><span class="o">(</span><span class="p">:</span><span class="nd">empty</span><span class="o">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">min-width</span><span class="p">:</span> <span class="mi">20</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">max-width</span><span class="p">:</span> <span class="n">max-content</span><span class="p">;</span>    
</span></span><span class="line"><span class="cl">    <span class="c">/* display: inline-block; */</span>
</span></span><span class="line"><span class="cl">    <span class="k">padding</span><span class="p">:</span> <span class="mi">3</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">margin</span><span class="p">:</span> <span class="mi">8</span><span class="kt">px</span> <span class="kc">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-bottom</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#d9d9d9</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">font-size</span><span class="p">:</span> <span class="mi">14</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">color</span><span class="p">:</span> <span class="mh">#969696</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">line-height</span><span class="p">:</span> <span class="mf">1.7</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="显示代码copy按钮">显示代码copy按钮</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">ShowCodeCopyButtons</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>可以在<code>main.css</code>中修改codecopybutton样式</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">.</span><span class="nc">copy-code</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">top</span><span class="p">:</span> <span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">right</span><span class="p">:</span> <span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">background</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">78</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-radius</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">radius</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">padding</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">font-size</span><span class="p">:</span> <span class="mi">14</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">user-select</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nt">div</span><span class="p">.</span><span class="nc">highlight</span><span class="p">:</span><span class="nd">hover</span> <span class="p">.</span><span class="nc">copy-code</span><span class="o">,</span>
</span></span><span class="line"><span class="cl"><span class="nt">pre</span><span class="p">:</span><span class="nd">hover</span> <span class="p">.</span><span class="nc">copy-code</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">display</span><span class="p">:</span> <span class="kc">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="代码块滚动">代码块滚动</h3>
<p>通过css控制，给代码块设置个最大高度。在<code>blank.css</code>中添加：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="nt">pre</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">max-height</span><span class="p">:</span> <span class="mi">500</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="shortcode">shortcode</h3>
<ol>
<li>标签，源文件来自<a href="https://github.com/martignoni/hugo-notice">@martignoni</a></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">{{/* Available notice types: warning, info, note, tip */}}
</span></span><span class="line"><span class="cl">{{- $noticeType := .Get 0 | default &#34;note&#34; -}}
</span></span><span class="line"><span class="cl">{{- $title := .Get 1 | default $noticeType -}}
</span></span><span class="line"><span class="cl">{{/* Workaround markdownify inconsistency for single/multiple paragraphs */}}
</span></span><span class="line"><span class="cl">{{- $raw := (markdownify .Inner | chomp) -}}
</span></span><span class="line"><span class="cl">{{- $block := findRE &#34;(?is)^<span class="err">&lt;</span>(?:address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h(?:1|2|3|4|5|6)|header|hgroup|hr|li|main|nav|noscript|ol|output|p|pre|section|table|tfoot|ul|video)\\b&#34; $raw 1 -}}
</span></span><span class="line"><span class="cl">{{/* Count how many times we&#39;ve called this shortcode and load the css if it&#39;s the first time */}}
</span></span><span class="line"><span class="cl">{{- if not ($.Page.Scratch.Get &#34;noticecount&#34;) -}}
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- &lt;style type=&#34;text/css&#34;&gt;.notice{--root-color:#444;--root-background:#e8e3f6b3;--title-color:#444;--title-background:#e8e3f6;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e8e3f6b3;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}&lt;/style&gt; --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">style</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/css&#34;</span><span class="p">&gt;.</span><span class="nc">notice</span><span class="p">{</span><span class="nv">--root-color</span><span class="p">:</span><span class="mh">#444</span><span class="p">;</span><span class="nv">--root-background</span><span class="p">:</span><span class="mh">#eff</span><span class="p">;</span><span class="nv">--title-color</span><span class="p">:</span><span class="mh">#fff</span><span class="p">;</span><span class="nv">--title-background</span><span class="p">:</span><span class="mh">#7bd</span><span class="p">;</span><span class="nv">--warning-title</span><span class="p">:</span><span class="mh">#c33</span><span class="p">;</span><span class="nv">--warning-content</span><span class="p">:</span><span class="mh">#fee</span><span class="p">;</span><span class="nv">--info-title</span><span class="p">:</span><span class="mh">#fb7</span><span class="p">;</span><span class="nv">--info-content</span><span class="p">:</span><span class="mh">#fec</span><span class="p">;</span><span class="nv">--note-title</span><span class="p">:</span><span class="mh">#6be</span><span class="p">;</span><span class="nv">--note-content</span><span class="p">:</span><span class="mh">#e7f2fa</span><span class="p">;</span><span class="nv">--tip-title</span><span class="p">:</span><span class="mh">#5a5</span><span class="p">;</span><span class="nv">--tip-content</span><span class="p">:</span><span class="mh">#efe</span><span class="p">}@</span><span class="k">media</span> <span class="o">(</span><span class="nt">prefers-color-scheme</span><span class="p">:</span><span class="nd">dark</span><span class="o">)</span><span class="p">{.</span><span class="nc">notice</span><span class="p">{</span><span class="nv">--root-color</span><span class="p">:</span><span class="mh">#ddd</span><span class="p">;</span><span class="nv">--root-background</span><span class="p">:</span><span class="mh">#eff</span><span class="p">;</span><span class="nv">--title-color</span><span class="p">:</span><span class="mh">#fff</span><span class="p">;</span><span class="nv">--title-background</span><span class="p">:</span><span class="mh">#7bd</span><span class="p">;</span><span class="nv">--warning-title</span><span class="p">:</span><span class="mh">#800</span><span class="p">;</span><span class="nv">--warning-content</span><span class="p">:</span><span class="mh">#400</span><span class="p">;</span><span class="nv">--info-title</span><span class="p">:</span><span class="mh">#a50</span><span class="p">;</span><span class="nv">--info-content</span><span class="p">:</span><span class="mh">#420</span><span class="p">;</span><span class="nv">--note-title</span><span class="p">:</span><span class="mh">#069</span><span class="p">;</span><span class="nv">--note-content</span><span class="p">:</span><span class="mh">#023</span><span class="p">;</span><span class="nv">--tip-title</span><span class="p">:</span><span class="mh">#363</span><span class="p">;</span><span class="nv">--tip-content</span><span class="p">:</span><span class="mh">#121</span><span class="p">}}</span><span class="nt">body</span><span class="p">.</span><span class="nc">dark</span> <span class="p">.</span><span class="nc">notice</span><span class="p">{</span><span class="nv">--root-color</span><span class="p">:</span><span class="mh">#ddd</span><span class="p">;</span><span class="nv">--root-background</span><span class="p">:</span><span class="mh">#eff</span><span class="p">;</span><span class="nv">--title-color</span><span class="p">:</span><span class="mh">#fff</span><span class="p">;</span><span class="nv">--title-background</span><span class="p">:</span><span class="mh">#7bd</span><span class="p">;</span><span class="nv">--warning-title</span><span class="p">:</span><span class="mh">#800</span><span class="p">;</span><span class="nv">--warning-content</span><span class="p">:</span><span class="mh">#400</span><span class="p">;</span><span class="nv">--info-title</span><span class="p">:</span><span class="mh">#a50</span><span class="p">;</span><span class="nv">--info-content</span><span class="p">:</span><span class="mh">#420</span><span class="p">;</span><span class="nv">--note-title</span><span class="p">:</span><span class="mh">#069</span><span class="p">;</span><span class="nv">--note-content</span><span class="p">:</span><span class="mh">#023</span><span class="p">;</span><span class="nv">--tip-title</span><span class="p">:</span><span class="mh">#363</span><span class="p">;</span><span class="nv">--tip-content</span><span class="p">:</span><span class="mh">#121</span><span class="p">}.</span><span class="nc">notice</span><span class="p">{</span><span class="k">padding</span><span class="p">:</span><span class="mi">18</span><span class="kt">px</span><span class="p">;</span><span class="k">line-height</span><span class="p">:</span><span class="mi">24</span><span class="kt">px</span><span class="p">;</span><span class="k">margin-bottom</span><span class="p">:</span><span class="mi">24</span><span class="kt">px</span><span class="p">;</span><span class="k">border-radius</span><span class="p">:</span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span><span class="k">color</span><span class="p">:</span><span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">root</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span><span class="k">background</span><span class="p">:</span><span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">root</span><span class="o">-</span><span class="n">background</span><span class="p">)}.</span><span class="nc">notice</span> <span class="nt">p</span><span class="p">:</span><span class="nd">last-child</span><span class="p">{</span><span class="k">margin-bottom</span><span class="p">:</span><span class="mi">0</span><span class="p">}.</span><span class="nc">notice-title</span><span class="p">{</span><span class="k">margin</span><span class="p">:</span><span class="mi">-18</span><span class="kt">px</span> <span class="mi">-18</span><span class="kt">px</span> <span class="mi">12</span><span class="kt">px</span><span class="p">;</span><span class="k">padding</span><span class="p">:</span><span class="mi">4</span><span class="kt">px</span> <span class="mi">18</span><span class="kt">px</span><span class="p">;</span><span class="k">border-radius</span><span class="p">:</span><span class="mi">4</span><span class="kt">px</span> <span class="mi">4</span><span class="kt">px</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">;</span><span class="k">font-weight</span><span class="p">:</span><span class="mi">700</span><span class="p">;</span><span class="k">color</span><span class="p">:</span><span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">title</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span><span class="k">background</span><span class="p">:</span><span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">title</span><span class="o">-</span><span class="n">background</span><span class="p">)}.</span><span class="nc">notice</span><span class="p">.</span><span class="nc">warning</span> <span class="p">.</span><span class="nc">notice-title</span><span class="p">{</span><span class="k">background</span><span class="p">:</span><span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">warning</span><span class="o">-</span><span class="n">title</span><span class="p">)}.</span><span class="nc">notice</span><span class="p">.</span><span class="nc">warning</span><span class="p">{</span><span class="k">background</span><span class="p">:</span><span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">warning</span><span class="o">-</span><span class="n">content</span><span class="p">)}.</span><span class="nc">notice</span><span class="p">.</span><span class="nc">info</span> <span class="p">.</span><span class="nc">notice-title</span><span class="p">{</span><span class="k">background</span><span class="p">:</span><span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">info</span><span class="o">-</span><span class="n">title</span><span class="p">)}.</span><span class="nc">notice</span><span class="p">.</span><span class="nc">info</span><span class="p">{</span><span class="k">background</span><span class="p">:</span><span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">info</span><span class="o">-</span><span class="n">content</span><span class="p">)}.</span><span class="nc">notice</span><span class="p">.</span><span class="nc">note</span> <span class="p">.</span><span class="nc">notice-title</span><span class="p">{</span><span class="k">background</span><span class="p">:</span><span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">note</span><span class="o">-</span><span class="n">title</span><span class="p">)}.</span><span class="nc">notice</span><span class="p">.</span><span class="nc">note</span><span class="p">{</span><span class="k">background</span><span class="p">:</span><span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">note</span><span class="o">-</span><span class="n">content</span><span class="p">)}.</span><span class="nc">notice</span><span class="p">.</span><span class="nc">tip</span> <span class="p">.</span><span class="nc">notice-title</span><span class="p">{</span><span class="k">background</span><span class="p">:</span><span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">tip</span><span class="o">-</span><span class="n">title</span><span class="p">)}.</span><span class="nc">notice</span><span class="p">.</span><span class="nc">tip</span><span class="p">{</span><span class="k">background</span><span class="p">:</span><span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">tip</span><span class="o">-</span><span class="n">content</span><span class="p">)}.</span><span class="nc">icon-notice</span><span class="p">{</span><span class="k">display</span><span class="p">:</span><span class="kc">inline-flex</span><span class="p">;</span><span class="k">align-self</span><span class="p">:</span><span class="kc">center</span><span class="p">;</span><span class="k">margin-right</span><span class="p">:</span><span class="mi">8</span><span class="kt">px</span><span class="p">}.</span><span class="nc">icon-notice</span> <span class="nt">img</span><span class="o">,</span><span class="p">.</span><span class="nc">icon-notice</span> <span class="nt">svg</span><span class="p">{</span><span class="k">height</span><span class="p">:</span><span class="mi">1</span><span class="kt">em</span><span class="p">;</span><span class="k">width</span><span class="p">:</span><span class="mi">1</span><span class="kt">em</span><span class="p">;</span><span class="n">fill</span><span class="p">:</span><span class="kc">currentColor</span><span class="p">}.</span><span class="nc">icon-notice</span> <span class="nt">img</span><span class="o">,</span><span class="p">.</span><span class="nc">icon-notice</span><span class="p">.</span><span class="nc">baseline</span> <span class="nt">svg</span><span class="p">{</span><span class="k">top</span><span class="p">:</span><span class="mf">.125</span><span class="kt">em</span><span class="p">;</span><span class="k">position</span><span class="p">:</span><span class="kc">relative</span><span class="p">}&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;&lt;</span><span class="nt">svg</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;0&#34;</span> <span class="na">height</span><span class="o">=</span><span class="s">&#34;0&#34;</span> <span class="na">display</span><span class="o">=</span><span class="s">&#34;none&#34;</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&#34;http://www.w3.org/2000/svg&#34;</span><span class="p">&gt;&lt;</span><span class="nt">symbol</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;tip-notice&#34;</span> <span class="na">viewBox</span><span class="o">=</span><span class="s">&#34;0 0 512 512&#34;</span> <span class="na">preserveAspectRatio</span><span class="o">=</span><span class="s">&#34;xMidYMid meet&#34;</span><span class="p">&gt;&lt;</span><span class="nt">path</span> <span class="na">d</span><span class="o">=</span><span class="s">&#34;M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">symbol</span><span class="p">&gt;&lt;</span><span class="nt">symbol</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;note-notice&#34;</span> <span class="na">viewBox</span><span class="o">=</span><span class="s">&#34;0 0 512 512&#34;</span> <span class="na">preserveAspectRatio</span><span class="o">=</span><span class="s">&#34;xMidYMid meet&#34;</span><span class="p">&gt;&lt;</span><span class="nt">path</span> <span class="na">d</span><span class="o">=</span><span class="s">&#34;M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">symbol</span><span class="p">&gt;&lt;</span><span class="nt">symbol</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;warning-notice&#34;</span> <span class="na">viewBox</span><span class="o">=</span><span class="s">&#34;0 0 576 512&#34;</span> <span class="na">preserveAspectRatio</span><span class="o">=</span><span class="s">&#34;xMidYMid meet&#34;</span><span class="p">&gt;&lt;</span><span class="nt">path</span> <span class="na">d</span><span class="o">=</span><span class="s">&#34;M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">symbol</span><span class="p">&gt;&lt;</span><span class="nt">symbol</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;info-notice&#34;</span> <span class="na">viewBox</span><span class="o">=</span><span class="s">&#34;0 0 512 512&#34;</span> <span class="na">preserveAspectRatio</span><span class="o">=</span><span class="s">&#34;xMidYMid meet&#34;</span><span class="p">&gt;&lt;</span><span class="nt">path</span> <span class="na">d</span><span class="o">=</span><span class="s">&#34;M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">symbol</span><span class="p">&gt;&lt;/</span><span class="nt">svg</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{{- end -}}
</span></span><span class="line"><span class="cl">{{- $.Page.Scratch.Add &#34;noticecount&#34; 1 -}} 
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;notice {{ $noticeType }}&#34;</span> <span class="err">{{</span> <span class="na">if</span> <span class="na">len</span> <span class="err">.</span><span class="na">Params</span> <span class="err">|</span> <span class="na">eq</span> <span class="na">3</span> <span class="err">}}</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;{{ .Get 2 }}&#34;</span> <span class="err">{{</span> <span class="na">end</span> <span class="err">}}</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;first notice-title&#34;</span><span class="p">&gt;&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;icon-notice baseline&#34;</span><span class="p">&gt;&lt;</span><span class="nt">svg</span><span class="p">&gt;&lt;</span><span class="nt">use</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#{{- $noticeType -}}-notice&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">use</span><span class="p">&gt;&lt;/</span><span class="nt">svg</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>{{ $title }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{{- if or $block (not $raw) }}{{ $raw }}{{ else }}<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ $raw }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>{{ end -}}
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>效果如下：

<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice tip" >

<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>title</p><p>This is a tip.</p></div>
<div class="notice note" >

<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#note-notice"></use></svg></span>title</p><p>This is a notice.</p></div>
<div class="notice warning" >

<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"></use></svg></span>title</p><p>This is a warning.</p></div>
<div class="notice info" >

<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#info-notice"></use></svg></span>title</p><p>This is a info.</p></div></p>
<hr>
<p><strong>参考链接</strong></p>
<ul>
<li><a href="https://shishuochen.github.io/2022/cpvuqozuc/">https://shishuochen.github.io/2022/cpvuqozuc/</a></li>
<li><a href="https://333rd.net/posts/tech/hugo%E9%83%A8%E7%BD%B2%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A22/">3rd&rsquo;s Blog</a></li>
<li><a href="https://irithys.com/p/hugo-shortcode-list/">irithys</a></li>
<li><a href="https://shishuochen.github.io/2022/cpvuqozuc/">shishuochen</a></li>
<li><a href="https://www.sulvblog.cn/posts/blog/build_hugo/">sulvblog</a></li>
<li><a href="https://www.lilmp.com/2022-06-22/hugo-papermod-blog/#hugopapermod-shortcode">limp</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>ℹ️Log｜2023-06-15</title>
      <link>https://goen-kkk.github.io/posts/ilog/23-6-15/</link>
      <pubDate>Thu, 15 Jun 2023 14:38:01 +0800</pubDate>
      
      <guid>https://goen-kkk.github.io/posts/ilog/23-6-15/</guid>
      <description>来源于B站up主提出的internet log概念</description>
      <content:encoded><![CDATA[<figure>
    <img loading="lazy" src="https://b2.kuibu.net/file/imgdisk/2023/06/15/Xnip2023-06-15_17-11-12.png"
         alt="@斯加德产品组长理解的需求并不是总负责人的需求，导致博主两周的加班白费了" width="50%"/> <figcaption>
            <p><a href="https://www.xiaohongshu.com/explore/64880d680000000013017fff">@斯加德</a>产品组长理解的需求并不是总负责人的需求，导致博主两周的加班白费了</p>
        </figcaption>
</figure>

<figure>
    <img loading="lazy" src="https://b2.kuibu.net/file/imgdisk/2023/06/15/v3.th.jpg"
         alt="@pingu喜欢这个字体，很哲学"/> <figcaption>
            <p><a href="https://www.xiaohongshu.com/explore/64840801000000001300f80c">@pingu</a>喜欢这个字体，很哲学</p>
        </figcaption>
</figure>

<figure>
    <img loading="lazy" src="https://b2.kuibu.net/file/imgdisk/2023/06/15/v3163eb9e9aea5e738.jpg"
         alt="⛵️超治愈休闲手游1sland,ios美服" width="30%"/> <figcaption>
            <p>⛵️超治愈休闲手游<code>1sland</code>,ios美服</p>
        </figcaption>
</figure>

<figure>
    <img loading="lazy" src="https://b2.kuibu.net/file/imgdisk/2023/06/15/v3de439c8b27b6b888.jpg"
         alt="@芝麻汤圆儿好可爱的工牌，也许下次六一时也能在学院里举办这种活动，迷你学生卡🤔" width="50%"/> <figcaption>
            <p><a href="https://www.xiaohongshu.com/explore/647865750000000013012b02">@芝麻汤圆儿</a>好可爱的工牌，也许下次六一时也能在学院里举办这种活动，迷你学生卡🤔</p>
        </figcaption>
</figure>

<figure>
    <img loading="lazy" src="https://b2.kuibu.net/file/imgdisk/2023/06/16/v3.jpg"
         alt="@测试媛小蒋作为模块导入时不会执行其中的代码" width="50%"/> <figcaption>
            <p><a href="https://www.xiaohongshu.com/explore/648714df00000000140266ad">@测试媛小蒋</a>作为模块导入时不会执行其中的代码</p>
        </figcaption>
</figure>

<p><a href="https://blog.gimo.me/posts/using-hugo-shortcodes-to-create-github-widget/">@Yuanji</a>: 用 Hugo 的 shortcodes 做 GitHub 卡片


<article class="sc-card">
  <a href="https://github.com/gohugoio/hugo" target="_blank" rel="noopener">
    <header>
      <img alt="gohugoio/hugo" src="https://opengraph.githubassets.com/1/gohugoio/hugo" />
    </header>
    <div class="sc-card-content">
      <p class="sc-card-title">gohugoio/hugo</p>
      <p class="sc-card-details"></p>
      <p class="sc-card-details">The world’s fastest framework for building websites.</p>
      
      <span>github.com</span>
    </div>
  </a>
</article></p>
<ul>
<li><code>github.html</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">{{ $repo := .Get &#34;repo&#34; }}
</span></span><span class="line"><span class="cl">{{ $detail := getJSON &#34;https://api.github.com/repos/&#34; $repo }}
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">article</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;sc-card&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;https://github.com/{{ $repo }}&#34;</span> <span class="na">target</span><span class="o">=</span><span class="s">&#34;_blank&#34;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;noopener&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">header</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">img</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;{{ $repo }}&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;https://opengraph.githubassets.com/1/{{ $repo }}&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;sc-card-content&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;sc-card-title&#34;</span><span class="p">&gt;</span>{{ .Get &#34;repo&#34; }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;sc-card-details&#34;</span><span class="p">&gt;</span>{{ with $detail }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;sc-card-details&#34;</span><span class="p">&gt;</span>{{ .description }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      {{ end }}
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>github.com<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">article</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>样式文件</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">.</span><span class="nc">sc-card</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-radius</span><span class="p">:</span> <span class="mf">.85</span><span class="kt">em</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-width</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-style</span><span class="p">:</span> <span class="kc">solid</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-color</span><span class="p">:</span> <span class="mh">#e1e8ed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">box-sizing</span><span class="p">:</span> <span class="kc">border-box</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">overflow</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">font-size</span><span class="p">:</span> <span class="mi">14</span><span class="kt">px</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">sc-card</span><span class="p">:</span><span class="nd">hover</span> <span class="p">.</span><span class="nc">sc-card-content</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">background</span><span class="p">:</span> <span class="mh">#f5f8fa</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">sc-card</span> <span class="nt">a</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">none</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">sc-card</span> <span class="nt">img</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">border</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span> <span class="kc">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-radius</span><span class="p">:</span> <span class="mi">15</span><span class="kt">px</span> <span class="mi">15</span><span class="kt">px</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">sc-card-content</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">padding</span><span class="p">:</span> <span class="mi">1</span><span class="kt">em</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">sc-card-content</span> <span class="nt">h2</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mf">.15</span><span class="kt">em</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">max-height</span><span class="p">:</span> <span class="mf">1.3</span><span class="kt">em</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">color</span><span class="p">:</span> <span class="mh">#000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">white-space</span><span class="p">:</span> <span class="kc">nowrap</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">overflow</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">text-overflow</span><span class="p">:</span> <span class="kc">ellipsis</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">sc-card-content</span> <span class="nt">p</span><span class="p">.</span><span class="nc">sc-card-title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">font-weight</span><span class="p">:</span> <span class="mi">700</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">font-size</span><span class="p">:</span> <span class="mf">1.5</span><span class="kt">em</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">line-height</span><span class="p">:</span> <span class="mf">1.25</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mf">.15</span><span class="kt">em</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">color</span><span class="p">:</span> <span class="mh">#000</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">sc-card-content</span> <span class="nt">p</span><span class="p">.</span><span class="nc">sc-card-details</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">color</span><span class="p">:</span> <span class="mh">#000</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">sc-card-content</span> <span class="nt">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">color</span><span class="p">:</span> <span class="mh">#4f5a5f</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>还发现了<a href="https://gist.github.com/">gist</a>以及<a href="https://www.cacher.io/">gistbox</a>两个保存代码片段的工具，有待探索</p>
</blockquote>
]]></content:encoded>
    </item>
    
    <item>
      <title>Paper｜ADSketch</title>
      <link>https://goen-kkk.github.io/posts/papers/adsketch/</link>
      <pubDate>Wed, 17 May 2023 15:06:59 +0800</pubDate>
      
      <guid>https://goen-kkk.github.io/posts/papers/adsketch/</guid>
      <description>Zhuangbin Chen, published at ICSE2022（CCF-A）</description>
      <content:encoded><![CDATA[<h2 id="研究背景">研究背景</h2>
<h3 id="研究问题">研究问题</h3>
<p>随着云计算的出现，许多传统的软件系统被迁移到云计算平台上作为在线服务。云服务质量于用户体验而言至关重要。由于在线服务需要服务全球数以百万计的客户，短时间的性能下降可能导致经济损失和用户不满。因此，主动甚至自适应的系统排故成为在线服务提供商的核心能力。</p>
<p>云服务通过各种指标来监控逻辑资源(例如,一个虚拟机)和物理资源(例如,一个计算服务器)的各个方面。我们观察到当相似类型的性能异常发生时，它们往往会在<strong>指标时间序列上触发类似的反应/症状</strong>，我们称之为指标模式（metric pattern）。
比如服务性能瓶颈通常表现为吞吐量下降及CPU利用率上升，如图1所示。每个指标时间序列记录了一周左右的监测数据，其异常表现由红色表示。
<figure>
    <img loading="lazy" src="https://res-static.hc-cdn.cn/cloudbu-site/intl/zh-cn/compute_and_network_lab/paper-1/paper1_1.PNG"
         alt="Figure 1: 性能异常模式案例"/> <figcaption>
            <p>Figure 1: 性能异常模式案例</p>
        </figcaption>
</figure>

指标异常检测旨在找到指标序列（一种时序数据）中预期之外的或者罕见的模式，从而及时发现服务中的性能问题。</p>
<h3 id="传统解决方案的问题">传统解决方案的问题</h3>
<p>在对指标值进行异常检测时，现有方法往往缺乏可解释性，这对于工程师和分析人员采取补救措施至关重要。而且，它们无法有效地以在线方式适应不断变化的服务。</p>
<ul>
<li>算法结果可解释：现有工作大多是为指标序列的每个节点计算一个异常概率，并通过设置阈值的方式判断异常是否发生。然而这样的结果对运维人员的作用十分有限。由于算法无法进一步提供异常是由哪些故障/问题导致的，运维人员难以相信算法结果，需要手工排查大量指标进行问题定位。因此，可解释性对于故障分析与服务恢复具有重要作用。</li>
<li>异常模式在线更新：实际场景中，在线服务频繁变更（比如系统架构发生变化，新功能上线），异常模式也可能随之改变。现有工作大多通过历史离线数据训练学习异常检测模式，难以适应频繁变化的异常模式。因此现有工作部署在实际系统时，随着时间的推移将产生较多误报。</li>
</ul>
<h2 id="本文方案">本文方案</h2>
<p>针对以上局限性，作者提出了一种基于模式草图的在线服务系统性能异常检测方法ADSketch，该方法具有可解释性和自适应性。
其主要思想是从度量时间序列中识别出能够表示服务性能问题类别的判别性子序列。
ADSketch通过识别代表特定类型性能问题的一组异常度量模式来实现可解释性。如果类似的模式再次出现，潜在的问题就可以立即被认识到。此外，还设计了自适应学习算法，以适应由服务更新或用户行为变化引起的前所未有的模式。</p>
<h3 id="整体框架">整体框架</h3>
<p>共分为两个阶段：离线异常检测（offline phase）及在线异常检测（online phase）。在离线阶段，输入为一对指标序列，一个是不包含异常的指标序列（anomaly-free metric），用来作为正常指标的参考基准；另一个输入为需要进行异常检测的指标序列（metric for anomaly detection）。这个阶段将学习到两种指标模式，即正常模式（normal patterns）和异常模式（abnormal patterns）。特别地，指标模式为一组相似的子序列通过求平均获得。运维人员在日常故障处理过程中把服务性能问题与学习到的异常模式进行关联，以实现知识的积累。在线阶段则利用离线阶段捕获的模式进行快速的异常检测，同时对已习得的模式进行更新（adaptive pattern learning）。
<figure>
    <img loading="lazy" src="https://res-static.hc-cdn.cn/cloudbu-site/intl/zh-cn/compute_and_network_lab/paper-1/paper1_2.PNG"
         alt="Figure 2: ADSketch整体框架"/> <figcaption>
            <p>Figure 2: ADSketch整体框架</p>
        </figcaption>
</figure>
</p>
<figure>
    <img loading="lazy" src="https://s1.ax1x.com/2023/05/17/p9W8j9e.png"
         alt="Table 1: 变量汇总" width="50%"/> <figcaption>
            <p>Table 1: 变量汇总</p>
        </figcaption>
</figure>

<h3 id="离线异常检测">离线异常检测</h3>
<p>离线阶段的一个重要目标是发现指标模式。主要思想为，如果一个子序列显著偏离正常时期的子序列，那么它是一种异常模式。偏移程度用两个子序列的距离来度量，如果距离越大，说明越可能异常。对于一个长度为<code>$l$</code>的指标序列，假设子序列的长度为<code>$m$</code>，那该指标序列有<code>$l-m+1$</code>条子序列。通过计算这些子序列两两之间的距离，我们可以得到每一条子序列距离其他子序列最小的值，我们称为the smallest pair-wise distance（简称SPW距离）。SPW越大，则表明该子序列越偏离整体指标序列（与其他所有子序列的相似度较低），因此也越可能是异常。从图3可以看出，异常区间的SPW距离显著高于正常区间的，作者采用欧氏距离作为距离度量函数，并且采用<mark>STAMP</mark>算法进行快速的SPW距离计算。
<figure>
    <img loading="lazy" src="https://res-static.hc-cdn.cn/cloudbu-site/intl/zh-cn/compute_and_network_lab/paper-1/paper1_3.PNG"
         alt="Figure 3: 指标序列不同子序列的SPW距离"/> <figcaption>
            <p>Figure 3: 指标序列不同子序列的SPW距离</p>
        </figcaption>
</figure>
</p>
<h4 id="具体算法">具体算法</h4>
<p><code>$\mathcal{T}_n$</code>为输入的正常指标序列，<code>$\mathcal{T}_a$</code>为需要进行异常检测的序列，<code>$m$</code>为子序列长度，<code>$p$</code>为分位数阈值（用来划定异常子序列，为了降低漏报率，该参数设置的比较宽松），<code>$I$</code>和<code>$S$</code>为子序列的索引以及子序列的<code>SPW</code>距离。算法流程如下：
<figure>
    <img loading="lazy" src="https://res-static.hc-cdn.cn/cloudbu-site/intl/zh-cn/compute_and_network_lab/paper-1/paper1_4.PNG"
         alt="Figure 4: 指标模式发现算法"/> <figcaption>
            <p>Figure 4: 指标模式发现算法</p>
        </figcaption>
</figure>
</p>
<p>1：在<code>$\mathcal{T}_n$</code>内部计算<code>SPW</code>距离（self-join），即进行距离计算的子序列均取自<code>$\mathcal{T}_n$</code>，见图5第1部分。</p>
<p>2：对于<code>$\mathcal{T}_a$</code>​的子序列，从<code>$\mathcal{T}_n$</code>找与其最相似的子序列（cross-join），即进行距离计算的子序列分别来自<code>$\mathcal{T}_a$</code>​和<code>$\mathcal{T}_n$</code>。由于<code>$\mathcal{T}_n$</code>​为正常序列，因此<code>SPW</code>距离较大的<code>$\mathcal{T}_a$</code>​的子序列有可能为异常，由分位数阈值<code>$p$</code>划定正常与异常子序列，见图5第1部分。</p>
<p>3-4：构建连通图<code>$G$</code>，图中的节点为来自<code>$\mathcal{T}_n$</code>​和<code>$\mathcal{T}_a$</code>的所有子序列，两个节点有连线则表明它们在self-join和cross-join中取得<code>SPW</code>距离，即最相似。接着按照<code>$p$</code>划定的距离阈值将大于<code>$p$</code>的边剪断，这将产生孤立节点，孤立节点可以认为是候选的异常子序列<code>$N_i$</code>​，见图5第2部分。这里连接子图里的序列不能代表相似的指标模式，主要有两个原因：一是图的构造条件比较严格，只考虑了最近邻连接，不同子图之间也可能比较相似；二是由于百分位阈值<code>$p$</code>设置得比较宽松，可能会产生误报。</p>
<p>5-6：对每个子图里的子序列计算均值<code>$\mu_G$</code>​，并采用<mark>Affinity Propagation</mark>算法对均值向量做进一步聚类<code>$C$</code>。由此将所有相似的子序列尽可能地聚合在一起。</p>
<p>7-15：对进一步聚类得到的子序列簇<code>$C$</code>再次计算均值<code>$\mu_C$</code>​​，得到的均值向量作为指标模式。如果这个簇中所有的子序列均来自前面的候选异常子序列，则判定该指标模式为异常模式<code>$P_a$</code>​，否则为正常模式<code>$P_n$</code>​，见图5第3部分。</p>
<figure>
    <img loading="lazy" src="https://res-static.hc-cdn.cn/cloudbu-site/intl/zh-cn/compute_and_network_lab/paper-1/paper1_5.PNG"
         alt="Figure 5: 指标模式发现算法（图示）"/> <figcaption>
            <p>Figure 5: 指标模式发现算法（图示）</p>
        </figcaption>
</figure>

<h4 id="指标模式的可解释性">指标模式的可解释性</h4>
<p>对于每个度量模式，域工程师将标注触发它的性能问题的类型。特别地，一个模式可以同时具有多个标签。具有重叠的度量模式将共享同一组性能问题标签。</p>
<h3 id="在线异常检测">在线异常检测</h3>
<p>利用离线学习到的异常模式，我们能快速进行异常检测。输入一个长度为<code>$m$</code>的子序列<code>$t$</code>，计算<code>$t$</code>到上一步中学习到的所有模式的距离，我们搜索其最相似的度量模式，并检查它来自哪个模式池。</p>
<h4 id="具体算法-1">具体算法</h4>
<p>1-2：给定一个新的长度为<code>$m$</code>的度量子序列<code>$t$</code>，搜索其最相似的度量模式。</p>
<p>3-7：如果<code>$t$</code>与异常模式更相似，则预测为异常；否则为正常。</p>
<figure>
    <img loading="lazy" src="https://res-static.hc-cdn.cn/cloudbu-site/intl/zh-cn/compute_and_network_lab/paper-1/paper1_6.PNG"
         alt="Figure 6: 在线异常检测算法"/> <figcaption>
            <p>Figure 6: 在线异常检测算法</p>
        </figcaption>
</figure>

<h3 id="指标模式自适应学习">指标模式自适应学习</h3>
<p>由于云服务经常需要更新或新功能上线，指标模式也随之发生变化。作者提出在线更新离线过程中学习到的指标模式，如图7所示。算法的核心思想为，如果一个新的子序列<code>$t$</code>距离现有的模式（由相似子序列组成的簇计算均值得到）较近，则<code>$t$</code>将被吸收进现有的簇中并更新该簇，否则<code>$t$</code>将作为新的模式自组成一个新的簇。记<code>$S_C​$</code>为聚类簇的大小（即该簇包含的子序列数量），<code>$R_C​$</code>为聚类簇的半径（簇中心到所包含的子序列的最大距离），<code>$\mu_C$</code>为聚类簇中心（即簇所包含子序列的均值）。</p>
<h4 id="具体算法-2">具体算法</h4>
<p>1-2：首先寻找<code>$t$</code>最接近的模式。</p>
<p>3：均值向量<code>$\mu_C$</code>更新方程。</p>
<p>4-6：半径<code>$R_C[idx]$</code>的更新值。</p>
<p>7：考虑到正常团簇和异常团簇之间的高度不平衡性，我们为它们保持两个最大半径，分别记为<code>$d_n$</code>和<code>$d_a$</code></p>
<p>8：一旦一个簇改变了它的半径，我们重置了它的类的最大半径。</p>
<p>9-16：集群接受一个新成员，需要更新其均值向量<code>$\mu_C[idx]$</code>(即度量模式，通过第3行的公式更新)、大小<code>$S_C[idx]$</code>（加一）和半径<code>$R_C[idx]$</code>。</p>
<blockquote>
<p>11：对新形成的异常团簇的大小设置阈值来减轻假阳性。<br>
12-13：当集群的规模超过阈值时，集群的角色将从异常切换到正常。</p>
</blockquote>
<p>18-21：另一方面，如果簇拒绝<code>$t$</code>，我们通过适当地设置它的性质，形成一个新的只包含<code>$t$</code>的反常簇。</p>
<figure>
    <img loading="lazy" src="https://res-static.hc-cdn.cn/cloudbu-site/intl/zh-cn/compute_and_network_lab/paper-1/paper1_7.PNG"
         alt="Figure 7: 指标模式在线更新算法"/> <figcaption>
            <p>Figure 7: 指标模式在线更新算法</p>
        </figcaption>
</figure>

<p>半径<code>$R_C[idx]$</code>的更新有点问题。由于原始子序列不可得，我们无法直接计算新的半径。为了解决这个问题，我们使用最坏情况距离进行近似。如图5所示，当<code>$t$</code>位于产生半径(记为<code>$t_r$</code>)的杆件处切空间的(向内指)法线时，新半径达到最大值。</p>
<figure>
    <img loading="lazy" src="https://i.imgloc.com/2023/05/23/VA2KYd.png"
         alt="Figure 8: 簇半径的更新" width="70%"/> <figcaption>
            <p>Figure 8: 簇半径的更新</p>
        </figcaption>
</figure>

<h2 id="实验评估">实验评估</h2>
<p>通过从华为云中具有代表性的在线服务系统收集的公共数据和工业数据对所提方法进行评估。实验结果表明，ADSketch算法的性能明显优于现有的方法，证明了在线算法在新模式发现中的有效性。</p>
<h2 id="复现结果">复现结果</h2>
<p>时间&amp;资源</p>
<h2 id="个人总结">个人总结</h2>
]]></content:encoded>
    </item>
    
    <item>
      <title>Collection｜Paperwriting</title>
      <link>https://goen-kkk.github.io/posts/paperw/</link>
      <pubDate>Mon, 15 May 2023 22:41:14 +0800</pubDate>
      
      <guid>https://goen-kkk.github.io/posts/paperw/</guid>
      <description>论文常用表达</description>
      <content:encoded><![CDATA[<h2 id="0-abstract">0 Abstract</h2>
<p>Recently, &hellip; has been gaining significant attention from society.<br>
many individuals are seeking to uncover the background and secrets behind its impressive performance.</p>
<h2 id="1-introduction">1 Introduction</h2>
<p>In addition to the benefits brought by the increase in data volume and computational power, researchers are also exploring ways to integrate new technologies with GAI algorithms.<br>
However, it wasn’t until the advent of deep learning that generative models saw significant improvements in performance.<br>
Transformer has later been applied in CV and then become the dominant backbone for many generative models in various domains
In the field of &hellip;<br>
non-trivial 很重要.
they are unable to effectively <mark>accommodate</mark> the ever-changing services in an online fashion.适应，adapt to<br>
versatile tools 多功能工具
Take a &hellip; as an instance,<br>
However, one big caveat of T2I based on diffusion models is the high cost of training with a prohibitively large amount of training data [3] and compute.</p>
<p>with a special emphasis on methods using Textual Inversion and DreamBooth. 文章只考虑了&hellip;方法</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>读一首诗再睡觉｜MAGNOLIA</title>
      <link>https://goen-kkk.github.io/posts/pieces/magnolia/</link>
      <pubDate>Sun, 14 May 2023 11:41:11 +0800</pubDate>
      
      <guid>https://goen-kkk.github.io/posts/pieces/magnolia/</guid>
      <description>还记得从第一次牵住手指 到第一次真正的吻 曾经需要多久吗？</description>
      <content:encoded><![CDATA[<p>
  <img loading="lazy" src="https://i.imgloc.com/2023/05/23/VA21tw.jpeg" alt=""  /></p>
<h2 id="玉兰花">玉兰花</h2>
<p>今年的春夏两季决心要<br>
加快速度，把自己打包成一个<br>
为时三天的季节<br>
从冬天里蒸腾而出。<br>
前面院子里那一树不情愿的<br>
玉兰花苞失去了控制<br>
忽然间怒放开来。<br>
两天后，绸缎般淡粉色的花瓣<br>
围着树干堆积着<br>
就像脱下来的衬裙。</p>
<p>还记得从前的春天有多长吗？<br>
<mark>还记得从第一次牵住手指。<br>
到第一次真正的吻曾经需要多久吗？而这之后。<br>
还记得另一次漫长的等待，无尽的摩挲。<br>
就为了解开一粒纽扣吗？</mark></p>
<p>作者 / [美国]丽泽·穆勒<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<h2 id="magnolia">MAGNOLIA</h2>
<p>This year spring and summer decided<br>
to make it quick, roll themselves into one<br>
season of three days<br>
and steam right out of winter.<br>
In the front yard the reluctant<br>
magnolia buds lost control<br>
and suddenly stood wide open.<br>
Two days later their pale pink silks<br>
heaped up around the trunk<br>
like cast-off petticoats.</p>
<p>Remember how long spring used to take?<br>
And how long from the first locking of fingers<br>
to the first real kiss? And after that<br>
the other eternity, endless motion<br>
toward the undoing of a button?</p>
<p>by Lisel Mueller</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>翻译：唐小兵；《我深爱我们一起相处的这些夜晚》，上海文艺出版社&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>DL复习｜机器学习概论</title>
      <link>https://goen-kkk.github.io/posts/nndl/dl-0/</link>
      <pubDate>Sat, 13 May 2023 21:12:25 +0800</pubDate>
      
      <guid>https://goen-kkk.github.io/posts/nndl/dl-0/</guid>
      <description>机器学习：通过算法使得机器能从大量数据中学习规律从而对新的样本做决策。</description>
      <content:encoded><![CDATA[<h2 id="机器学习基本要素">机器学习基本要素</h2>
<p><mark>机器学习的三要素：模型、学习准则、优化。</mark></p>
<h3 id="模型">模型</h3>
<p>线性模型：$f(x,\theta)=\textbf{w}^T\textbf{x}+b$<br>
非线性模型：广义的非线性模型可以写为多个非线性基函数𝜙(𝒙) 的线性组合。$f(x,\theta)=\textbf{w}^T\phi(\textbf{x})+b$ 如果 $\phi(\textbf{x})$本身为可学习的基函数，则$f(x,\theta)$就等价于神经网络模型</p>
<h3 id="学习准则">学习准则</h3>
<p>模型的好坏可以通过期望风险衡量；
损失函数是非负实数函数，常见的损失函数：</p>
<ol>
<li>0-1损失：不连续且导数为 0，难以优化</li>
<li>平方损失：一般不适用于分类问题。$y$为实数值
$$\mathcal{L}(y, f(\mathbf{x};\theta))=\frac{1}{2}\left(y-f(\mathbf{x};\theta))\right)^2$$</li>
<li>交叉熵：一般用于分类问题
$\mathbf{y}$为one-hot标签向量
$$
\begin{align}
\mathcal{L}(\mathbf{y}, f(\mathbf{x};\theta))&amp;=-\mathbf{y}\mathrm{log}f(\mathbf{x};\theta) \\
&amp;= - \sum^{C}_{c=1}y_c\mathrm{log}f_c(\mathbf{x};\theta) \\
&amp;= -\mathrm{log}f_y(\mathbf{x};\theta)
\end{align}
$$</li>
</ol>
<p>因此，交叉熵损失函数也就是负对数似然函数。</p>
<p><strong>经验风险最小化</strong>(Empirical Risk Minimization，ERM)原则：找到一组参数使得经验风险最小。

<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice info" >

<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#info-notice"></use></svg></span>过拟合</p><p>在训练集上错误率很低，但是在未知数据上错误率很高.往往是由于训练数据少和噪声以及模型能力强等原因造成的</p></div></p>
<p>为了解决过拟合问题， 一般在经验风险最小化的基础上再引入参数的正则化 (Regularization)来<mark>限制模型能力，使其不要过度地最小化经验风险</mark>。这种准则就是<strong>结构风险最小化</strong>(Structure Risk Minimization，SRM)准则
$$
\theta^*=\underset{\theta}{\arg \min } \frac{1}{N} \sum_{n=1}^N \mathcal{L}\left(y^{(n)}, f\left(\boldsymbol{x}^{(n)} ; \theta\right)\right)+\lambda \mathscr{l}_p(\theta)
$$
<strong>最大似然估计</strong></p>
<p><strong>最大后验估计</strong></p>
<p>所有损害优化的方法都是正则化，包括增加优化约束、干扰优化过程（提前停止、随机梯度下降）
$\mathscr{l}_2$范数正则化项，各个参数的平方和的开方值，用来减少参数空间，避免过拟合;
$\lambda$用来控制正则化的强度。<br>
$\mathscr{l}_1$范数正则化项，各个参数的绝对值之和，通常会使得参数有一定稀疏性。</p>
<p>加入正则化后，参数被限制到了一定的区域，等价于下面带约束条件的优化问题，
$$
\begin{aligned}
&amp; \theta^*=\underset{\theta}{\arg \min } \frac{1}{N} \sum_{n=1}^N \mathcal{L}\left(y^{(n)}, f\left(\boldsymbol{x}^{(n)} ; \theta\right)\right), \\
&amp; \text { s.t. } \quad \ell_p(\theta) \leq d
\end{aligned}
$$
$\mathcal{F}$为函数$f(\theta)$的等高线(为简单起见，这里用直线表示)。可以看出，$\mathscr{l}_1$范数的约束通常会使得最优解位于坐标轴上，意味着某一维会变为0，从而使得最终的参数为稀疏性向量。
$\mathscr{l}_2$参数取值空间是圆形，比较平滑，很难与损失函数的曲线相交在顶点上，但是它会使得参数更接近与0。</p>
<figure>
    <img loading="lazy" src="https://s1.ax1x.com/2023/05/13/p962aSx.png"
         alt="不同范数约束条件下的最优化问题示例"/> <figcaption>
            <p>不同范数约束条件下的最优化问题示例</p>
        </figcaption>
</figure>

<figure class="align-center ">
    <img loading="lazy" src="https://image.szdev.com/images/2018/12/03/book-py_ml_2nd-04_05.png#center"
         alt="$\mathscr{l}_2$范数约束条件下的最优化问题示例" width="50%"/> <figcaption>
            <p>$\mathscr{l}_2$范数约束条件下的最优化问题示例</p>
        </figcaption>
</figure>

<figure class="align-center ">
    <img loading="lazy" src="https://image.szdev.com/images/2018/12/03/book-py_ml_2nd-04_06.png#center"
         alt="$\mathscr{l}_1$范数约束条件下的最优化问题示例" width="50%"/> <figcaption>
            <p>$\mathscr{l}_1$范数约束条件下的最优化问题示例</p>
        </figcaption>
</figure>

<p>从贝叶斯学习的角度来讲，正则化是引入了参数的先验分布，使其不完全依赖训练数据<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>。</p>
<h3 id="优化">优化</h3>
<p>参数是模型的参数
超参数是定义模型结构或优化策略的参数，e.g. learning rate</p>
<p>针对梯度下降的优化算法，除了加正则化项之外，还可以通过提前停止来防止过拟合。如果在验证集上的错误率不再下降，就停止迭代。</p>
<h4 id="梯度下降">梯度下降</h4>
<p><strong>批量梯度下降法</strong>(Batch Gradient Descent，BGD)在每次迭代时需要计算每个样本上损失函数的梯度并求和。</p>
<p>在每次迭代时只采集一个样本，计算这个样本损失函数的梯度并更新参数，即<strong>随机梯度下降法</strong>(Stochastic Gradient Descent，SGD)</p>
<blockquote>
<p>随机梯度下降实现简单，收敛速度也非常快，因此使用非常广泛。随机梯度下降相当于在批量梯度 下降的梯度上引入了随机噪声，在非凸优化问题中，随机梯度下降更容易逃离局部最优点。</p>
</blockquote>
<p><strong>小批量梯度下降法</strong>(Mini-Batch Gradient Descent)是批量梯度下降和随机梯度下 降的折中.每次迭代时，我们随机选取一小部分训练样本来计算梯度并更新参数，这样既可以兼顾随机梯度下降法的优点，也可以提高训练效率</p>
<div class="notice note" >

<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#note-notice"></use></svg></span>批量大小的影响</p><p>批量大小不影响随机梯度的期望，但是会影响随机梯度的方差。<br>
批量越大，随机梯度的方差越小，引入的噪声也越小，训练也越稳定，因此可以设置较大的学习率。<br>
而批量较小时，需要设置较小的学习率，否则模型会不收敛。</p></div>
<figure>
    <img loading="lazy" src="https://i.328888.xyz/2023/05/18/VVXCjJ.png"
         alt="小批量梯度下降中，每次选取样本数量对损失下降的影响"/> <figcaption>
            <p>小批量梯度下降中，每次选取样本数量对损失下降的影响</p>
        </figcaption>
</figure>

<ul>
<li>从(a)可以看出，每次迭代选取的批量样本数越多，下降效果越明显，并且曲线越平滑。当每次选取一个样本时（相当于随机梯度下降），损失整体是下降趋势，但局部看会来回震荡。</li>
<li>从(b)可以看出，如果按整个数据集迭代的来看损失变化情况，则小批量样本数越小，下降效果越明显。</li>
</ul>
<h2 id="线性回归">线性回归</h2>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>TODO&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>Interview｜Transformer</title>
      <link>https://goen-kkk.github.io/posts/interv/transformer/</link>
      <pubDate>Sat, 13 May 2023 09:57:10 +0800</pubDate>
      
      <guid>https://goen-kkk.github.io/posts/interv/transformer/</guid>
      <description>transformer知识点</description>
      <content:encoded><![CDATA[<figure class="align-center ">
    <img loading="lazy" src="https://machinelearningmastery.com/wp-content/uploads/2021/09/tour_3.png#center"
         alt="scaled dot product attention. source: Stefania Cristina" width="30%"/> <figcaption>
            <p>scaled dot product attention. source: <a href="https://machinelearningmastery.com/the-transformer-attention-mechanism/">Stefania Cristina</a></p>
        </figcaption>
</figure>

<p>$$Attention(Q,K,V)=softmax\left(\frac{QK^{T}}{\sqrt{d_k}}\right)V$$</p>
<h2 id="写一个self_attention-function">写一个self_attention function</h2>
<p>假如input的dim是<code>batch_size</code>, <code>seq_len</code>, <code>hidden_dim</code>，写一个self attention function。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">torch</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">math</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">torch.nn.functional</span> <span class="k">as</span> <span class="nn">F</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pytorch_lightning</span> <span class="k">as</span> <span class="nn">pl</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">q,k,v = (batch_size, seq_len, dim)
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">self_attention</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">d_k</span> <span class="o">=</span> <span class="n">k</span><span class="o">.</span><span class="n">size</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">attn_logits</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">matmul</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">k</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>   
</span></span><span class="line"><span class="cl">    <span class="n">attn_logits</span> <span class="o">=</span> <span class="n">attn_logits</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">d_k</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">mask</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">att_logits</span> <span class="o">=</span> <span class="n">attn_logits</span><span class="o">.</span><span class="n">masked_fill</span><span class="p">(</span><span class="n">mask</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">9e15</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">scores</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">softmax</span><span class="p">(</span><span class="n">attn_logits</span><span class="p">,</span> <span class="n">dim</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>             <span class="c1"># 计算自注意力权重</span>
</span></span><span class="line"><span class="cl">    <span class="n">values</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">matmul</span><span class="p">(</span><span class="n">scores</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>                    <span class="c1"># 计算自注意力分数</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">values</span><span class="p">,</span> <span class="n">scores</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ChatGPT版</strong></p>
<p>这里实现的self attention函数接受一个维度为(<code>batch_size, seq_length, input_dim</code>)的张量作为输入，其中batch_size表示批次大小，seq_length表示序列长度，input_dim表示输入特征的维度。在函数内部，我们首先使用三个线性层将输入特征映射到query、key和value空间。然后，我们通过计算query和key的点积，除以一个可学习的缩放因子，再进行softmax操作，得到注意力权重。最后，我们将注意力权重与value张量相乘，得到注意力输出，再将其映射回原始维度，并添加残差连接和层归一化。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">torch</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">torch.nn.functional</span> <span class="k">as</span> <span class="nn">F</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">SelfAttention</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_dim</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="nb">super</span><span class="p">(</span><span class="n">SelfAttention</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">input_dim</span> <span class="o">=</span> <span class="n">input_dim</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">hidden_dim</span> <span class="o">=</span> <span class="n">hidden_dim</span> <span class="k">if</span> <span class="n">hidden_dim</span> <span class="k">else</span> <span class="n">input_dim</span> <span class="o">//</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input_dim</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hidden_dim</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input_dim</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hidden_dim</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input_dim</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hidden_dim</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hidden_dim</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_dim</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">Q</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">K</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">V</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1"># 计算注意力权重</span>
</span></span><span class="line"><span class="cl">        <span class="n">attn_weights</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">softmax</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">bmm</span><span class="p">(</span><span class="n">Q</span><span class="p">,</span> <span class="n">K</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">/</span> <span class="n">torch</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hidden_dim</span><span class="p">)),</span> <span class="n">dim</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1"># 计算注意力输出</span>
</span></span><span class="line"><span class="cl">        <span class="n">attn_outputs</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">bmm</span><span class="p">(</span><span class="n">attn_weights</span><span class="p">,</span> <span class="n">V</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1"># 将注意力输出映射回原始维度</span>
</span></span><span class="line"><span class="cl">        <span class="n">attn_outputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">attn_outputs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1"># 添加残差连接和层归一化</span>
</span></span><span class="line"><span class="cl">        <span class="n">attn_outputs</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">layer_norm</span><span class="p">(</span><span class="n">attn_outputs</span> <span class="o">+</span> <span class="n">x</span><span class="p">,</span> <span class="p">[</span><span class="n">attn_outputs</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)])</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">attn_outputs</span>
</span></span></code></pre></td></tr></table>
</div>
</div>]]></content:encoded>
    </item>
    
    <item>
      <title>Collection｜Pieces</title>
      <link>https://goen-kkk.github.io/posts/pieces/</link>
      <pubDate>Tue, 09 May 2023 22:46:00 +0800</pubDate>
      
      <guid>https://goen-kkk.github.io/posts/pieces/</guid>
      <description>文字糖衣</description>
      <content:encoded><![CDATA[]]></content:encoded>
    </item>
    
    <item>
      <title>Collection｜Fancy websites</title>
      <link>https://goen-kkk.github.io/posts/collection/</link>
      <pubDate>Tue, 09 May 2023 22:20:43 +0800</pubDate>
      
      <guid>https://goen-kkk.github.io/posts/collection/</guid>
      <description>收集的各种网站</description>
      <content:encoded><![CDATA[<h2 id="resources">resources</h2>
<p><a href="https://freemagazines.top/">Free Magazines Online</a>：外文期刊</p>
<p><a href="https://dynamicwallpaper.club/gallery">Dynamic Wallpaper Club</a>：墙纸</p>
<p><a href="https://neetcode.io/">neetcode</a>：刷题网站</p>
<p><a href="https://www.tofugu.com/">TOFUGU</a>：日语文章博客</p>
<p><a href="https://openlibrary.org/">Open Library</a>：图书</p>
<p><a href="https://nn.labml.ai/index.html">labml.ai</a>：神经网络和相关算法的简单PyTorch实现的集合</p>
<p><a href="https://jeffe.cs.illinois.edu/teaching/algorithms/"></a></p>
<h2 id="tools">tools</h2>
<p><a href="https://carbon.now.sh/">carbon</a>：导出美观的代码</p>
<p><a href="https://www.webfx.com/tools/emoji-cheat-sheet/">Emoji Cheat Sheet</a>：Emoji</p>
<h3 id="图床">图床</h3>
<p><a href="https://postimages.org/">postimages</a></p>
<p><a href="https://yunjiemi.com/">跬步</a></p>
<h3 id="slide">slide</h3>
<p><a href="https://slidesgo.com/">slidesgo</a></p>
<p><a href="https://justfreeslide.com/">Just Free Slide</a></p>
<p><a href="https://hislide.io/">HiSlide</a></p>
<p><a href="https://www.happyhues.co/">Happy Hues</a></p>
<h2 id="chatgpt">ChatGPT</h2>
<p><a href="https://poe.com/ChatGPT">Poe</a></p>
<p><a href="https://chat.forefront.ai/">forefront.ai</a></p>
<h2 id="artist">Artist</h2>
<p><a href="https://harrysdesigns.com/">Harrys</a></p>
<h2 id="website">Website</h2>
<p><a href="https://www.codewars.com/">Codewars</a></p>
]]></content:encoded>
    </item>
    
  </channel>
</rss>
